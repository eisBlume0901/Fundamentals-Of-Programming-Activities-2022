package oneTwoCharge;

import java.util.ArrayList;
import java.util.Scanner;

import static java.lang.System.in;
import static java.lang.System.out;

public class GameLogic2
{
    static Scanner scanner = new Scanner(in);
    static Player player = new Player();
    static Computer computer = new Computer();


    //Method to get user input from console
    public static int readInt(String prompt, int userChoices)
    {
        int input;
        do
        {
            out.print(prompt);
            try
            {
                input = Integer.parseInt(scanner.next());
            }
            catch(Exception e)
            {
                input = -1;
                out.println("Please enter integers only!");
            }
        }
        while(input < 1 || input > userChoices || input > playerSkills().size());
        return input;
    }
    //Method to print a separator

    public static void printSeparator(int n)
    {
        for (int i = 0; i < n; i++)
        {
            out.print("-");
        }
        out.println();
    }
    //Method to print a heading
    public static void printHeading(String title)
    {
        out.println();
        out.println(title);
    }
    //Method to charge skill points

    public static int chargeP()
    {
        return player.playerSP += 1;
    }

    public static int chargeC()
    {
        return computer.computerSP += 1;
    }

    public static int attackByP()
    {
        return -4;
    }

    public static int attackByC()
    {
        return -4;
    }

    public static int healP()
    {
        return 5;
    }

    public static int healC()
    {
        return 5;
    }

    public static void automaticChargeUp()
    {
        if (computer.computerSP <= 0)
        {
            chargeC();
            out.println("Automatically charged up for computer!");
        }
    }

    public static void notEnoughSKillPoints()
    {
        if (player.playerSP <= 0)
        {
            out.println("Not enough skill points. \nPlease charge up!");
        }
    }


    public static ArrayList<Integer> playerSkills()
    {
        ArrayList<Integer> skills = new ArrayList<>();
        if (player.playerSP >= 0) skills.add(1); //charge
        if (player.playerSP >= 1) skills.add(2); //shield
        if (player.playerSP >= 1) skills.add(3); //wave
        if (player.playerSP >= 2) skills.add(4); //axe
        if (player.playerSP >= 4) skills.add(5); //kamekameha
        if (player.playerSP >= 5) skills.add(6); //amen
        return skills;
    }

    public static void damage()
    {
        out.println();
        out.println("You received damage!");
    }

    public static void noDamage()
    {
        out.println();
        out.println("No damage received!");
    }

    public static void choseCharge()
    {
        out.println();
        out.println("Computer chose charge");
    }

    public static void choseShield()
    {
        out.println();
        out.println("Computer chose shield");
    }
    public static void choseWave()
    {
        out.println();
        out.println("Computer chose wave");
    }
    public static void choseKamekameha()
    {
        out.println();
        out.println("Computer chose kamekameha");
    }
    public static void choseAxe()
    {
        out.println();
        out.println("Computer chose axe");
    }
    public static void choseAmen()
    {
        out.println();
        out.println("Computer chose amen");
    }

    public static void printPlayerStats()
    {
        printHeading("Player \nHP: " + player.playerHP + "\nSP: " + player.playerSP);
    }

    public static void printComputerStats()
    {
        printHeading("Computer \nHP: " + computer.computerHP + "\nSP: " + computer.computerSP);
    }
    public static void battle()
    {
        printHeading("Choose your move!");

        for (Integer n: playerSkills())
        {
            if (n == 1)
                out.println(n + " charge");
            else if (n == 2)
                out.println(n + " shield");
            else if (n == 3)
                out.println(n + " wave");
            else if (n == 4)
                out.println(n + " axe");
            else if (n == 5)
                out.println(n + " kamekameha");
            else if (n == 6)
                out.println(n + " amen");
        }

        automaticChargeUp();
        ArrayList<Integer> skills = new ArrayList<>();
        if (computer.computerSP >= 1) skills.add(1); //charge
        if (computer.computerSP >= 1) skills.add(2); //shield
        if (computer.computerSP >= 1) skills.add(3); //wave
        if (computer.computerSP >= 2) skills.add(4); //axe
        if (computer.computerSP >= 4) skills.add(5); //kamekameha
        if (computer.computerSP >= 5) skills.add(6); //amen

        ArrayList<Integer> computerMoves;
        computerMoves = skills;
        int random = (int) (Math.random()*(computerMoves.size()));
        int computerMove = computerMoves.get(random);
        out.println("Computer move: " + computerMove);
        out.println();
        for (Integer n: skills)
        {
            if (n == 1)
                out.println(n + " charge");
            else if (n == 2)
                out.println(n + " shield");
            else if (n == 3)
                out.println(n + " wave");
            else if (n == 4)
                out.println(n + " axe");
            else if (n == 5)
                out.println(n + " kamekameha");
            else if (n == 6)
                out.println(n + " amen");
        }
        int input = readInt("-> ", 6);
        out.println("You chose " + input);

        //CHARGE
        if (input == 1)
        {
            if (computerMove == 1) //charge
            {
                choseCharge();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                chargeP();
                printPlayerStats();

                printSeparator(30);

                chargeC();
                printComputerStats();
            }
            else if (computerMove == 2) //shield
            {
                choseShield();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP += 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 1;
                printComputerStats();
            }
            else if (computerMove == 3) //wave
            {
                choseWave();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP += 1;
                printPlayerStats();

                printSeparator(30);
                computer.computerSP -= 1;
                printComputerStats();
            }
            else if (computerMove == 4) //axe
            {
                choseAxe();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP += 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 2;
                printComputerStats();
            }
            else if (computerMove == 5) //kamekameha
            {
                choseKamekameha();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP += 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 4;
                printComputerStats();
            }
            else if (computerMove == 6) //amen
            {
                choseAmen();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP += 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerHP += healC();
                computer.computerSP -= 5;
                printComputerStats();
            }
        }
        //SHIELD
        else if (input == 2)
        {
            if (computerMove == 1) //charge
            {
                choseCharge();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);

                chargeC();
                printComputerStats();
            }
            else if (computerMove == 2) //shield
            {
                choseShield();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 1;
                printComputerStats();
            }
            else if (computerMove == 3) //wave
            {
                choseWave();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);
                computer.computerSP -= 1;
                printComputerStats();
            }
            else if (computerMove == 4) //axe
            {
                choseAxe();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 2;
                printComputerStats();
            }
            else if (computerMove == 5) //kamekameha
            {
                choseKamekameha();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 4;
                printComputerStats();
            }
            else if (computerMove == 6) //amen
            {
                choseAmen();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerHP += healC();
                computer.computerSP -= 5;
                printComputerStats();
            }
        }
        //WAVE
        else if(input == 3)
        {
            if (computerMove == 1) //charge
            {
                choseCharge();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerHP += attackByP() + 2;
                chargeC();
                printComputerStats();
            }
            else if (computerMove == 2) //shield
            {
                choseShield();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 1;
                printComputerStats();
            }
            else if (computerMove == 3) //wave
            {
                choseWave();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);
                computer.computerSP -= 1;
                printComputerStats();
            }
            else if (computerMove == 4) //axe
            {
                choseAxe();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                player.playerHP += attackByC() + 3;
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 2;
                printComputerStats();
            }
            else if (computerMove == 5) //kamekameha
            {
                choseKamekameha();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                player.playerHP += attackByC();
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 4;
                printComputerStats();
            }
            else if (computerMove == 6) //amen
            {
                choseAmen();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerHP += healC();
                computer.computerSP -= 5;
                printComputerStats();
            }
        }
        //AXE
        else if (input == 4)
        {
            if (computerMove == 1) //charge
            {
                choseCharge();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 2;
                printPlayerStats();

                printSeparator(30);

                chargeC();
                computer.computerHP += attackByP() + 1;
                printComputerStats();
            }
            else if (computerMove == 2) //shield
            {
                choseShield();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 2;
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 1;
                printComputerStats();
            }
            else if (computerMove == 3) //wave
            {
                choseWave();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);
                computer.computerHP += attackByP() + 3;
                computer.computerSP -= 1;
                printComputerStats();
            }
            else if (computerMove == 4) //axe
            {
                choseAxe();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 2;
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 2;
                printComputerStats();
            }
            else if (computerMove == 5) //kamekameha
            {
                choseKamekameha();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                player.playerHP += attackByC() + 3;
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 4;
                printComputerStats();
            }
            else if (computerMove == 6) //amen
            {
                choseAmen();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerHP += healC();
                computer.computerSP -= 5;
                printComputerStats();
            }
        }
        //KAMEKAMEHA
        else if(input == 5)
        {
            if (computerMove == 1) //charge
            {
                choseCharge();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 2;
                printPlayerStats();

                printSeparator(30);

                chargeC();
                computer.computerHP += attackByP();
                printComputerStats();
            }
            else if (computerMove == 2) //shield
            {
                choseShield();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 2;
                printPlayerStats();

                printSeparator(30);

                computer.computerHP += attackByP();
                computer.computerSP -= 1;
                printComputerStats();
            }
            else if (computerMove == 3) //wave
            {
                choseWave();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerHP += attackByP() + 2;
                computer.computerSP -= 1;
                printComputerStats();
            }
            else if (computerMove == 4) //axe
            {
                choseAxe();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 2;
                printPlayerStats();

                printSeparator(30);

                computer.computerHP += attackByP() + 3;
                computer.computerSP -= 2;
                printComputerStats();
            }
            else if (computerMove == 5) //kamekameha
            {
                choseKamekameha();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                player.playerHP += attackByC() + 3;
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 4;
                printComputerStats();
            }
            else if (computerMove == 6) //amen
            {
                choseAmen();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 1;
                printPlayerStats();

                printSeparator(30);

                computer.computerHP += healC();
                computer.computerSP -= 5;
                printComputerStats();
            }
        }
        //AMEN
        else if (input == 6)
        {
            if (computerMove == 1) //charge
            {
                choseCharge();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 5;
                player.playerSP += healP();
                printPlayerStats();

                printSeparator(30);

                chargeC();
                printComputerStats();
            }
            else if (computerMove == 2) //shield
            {
                choseShield();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 5;
                player.playerSP += healP();
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 1;
                printComputerStats();
            }
            else if (computerMove == 3) //wave
            {
                choseWave();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 5;
                player.playerSP += healP();
                printPlayerStats();

                printSeparator(30);
                computer.computerSP -= 1;
                printComputerStats();
            }
            else if (computerMove == 4) //axe
            {
                choseAxe();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 5;
                player.playerSP += healP();
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 2;
                printComputerStats();
            }
            else if (computerMove == 5) //kamekameha
            {
                choseKamekameha();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 5;
                player.playerSP += healP();
                printPlayerStats();

                printSeparator(30);

                computer.computerSP -= 4;
                printComputerStats();
            }
            else if (computerMove == 6) //amen
            {
                choseAmen();
                printSeparator(30);

                noDamage();
                printSeparator(20);

                player.playerSP -= 5;
                player.playerSP += healP();
                printPlayerStats();

                printSeparator(30);

                computer.computerHP += healC();
                computer.computerSP -= 5;
                printComputerStats();
            }
        }
    }

    public static void startGame()
    {

        out.println();
        out.println("Welcome to One, Two, Charge! ");
        out.println("Here is the mechanics of the game!");
        printSeparator(70);
        printSeparator(20);
        out.println("You and the computer has a maximum health points(HP) of 10.");
        out.println("Whoever reaches the health points of the other opponent wins!");
        out.println();
        out.println("Skill points and damage table:");
        out.println();
        out.println("Charge - recharges your SP by 1. \nYou do not need any skill points to access this.");
        out.println("Shield - costs 1 SP. \nYou are immune to any attacks except, \"Kamekameha\".");
        out.println("Wave - costs 1 SP. \nIt deals 2 damage to enemy attacks");
        out.println("Axe - costs 2 SP. \nIt deals 3 damage to enemy attacks.");
        out.println("Kamekameha - costs 4 SP. \nIt deals 6 damage to enemy attacks.");
        out.println("Amen - costs 5 SP. \nNegates all damage attacks and heals 5 HP.");
        out.println();
        out.println("Legend: ");
        out.println("SP = Skill Point/s");
        out.println("HP = Health Point/s");
        printSeparator(20);
        printSeparator(70);

        chargeP();
        chargeC();


    }

    public static void playerLose()
    {
        printHeading("You lose...");
        printPlayerStats();
        printComputerStats();
    }

    public static void playerWin()
    {
        printHeading("You win!");
        printPlayerStats();
        printComputerStats();
    }
}
